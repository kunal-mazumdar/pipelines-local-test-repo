valuesFilePath: ./values.yml

resources:
  - name: git_sonar_1
    type: CodeAnalysis
    configuration:
      tool: SonarCloud
      provider:
        integration: sonar_int
        urlKey: sonar_user_name
        tokenKey: sonar_token

pipelines:
  - name: code_analysis_pipe
    configuration:
      jfrogCliVersion: 2      
    steps:
      - name: my_first_step
        type: Bash
        configuration:
          outputResources:
            - name: git_sonar_1
        execution:
          onExecute:
            - printenv
            - write_output git_sonar_1 "codeDuplicationPercent=12"
            - write_output git_sonar_1 "linesOfCode=1500"
            - write_output git_sonar_1 "duplicateBlocks=8"
            - write_output git_sonar_1 "coveragePercent=68"
            - write_output git_sonar_1 "unitTests=137"
            - write_output git_sonar_1 "bugs=10"
            - write_output git_sonar_1 "vulnerabilities=19"
            - write_output git_sonar_1 "codeSmells=7"
            - write_output git_sonar_1 "hotspots=3"
